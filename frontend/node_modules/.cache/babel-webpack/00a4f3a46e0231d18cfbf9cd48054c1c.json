{"ast":null,"code":"import { FormControl, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/material/snack-bar\";\nimport * as i3 from \"src/app/services/recipes.service\";\nimport * as i4 from \"@angular/material/button\";\nexport let ImageUploadComponent = /*#__PURE__*/(() => {\n  class ImageUploadComponent {\n    constructor(fb, _snackbar, recipesService) {\n      this.fb = fb;\n      this._snackbar = _snackbar;\n      this.recipesService = recipesService;\n      this.UploadImageForm = this.fb.group({\n        recipeImage: new FormControl('', Validators.required)\n      });\n    }\n\n    ngOnInit() {}\n\n    onImageSelected(event) {\n      if (event.target.files && event.target.files[0]) {\n        this.file = event.target.files[0];\n        const reader = new FileReader();\n        reader.readAsDataURL(this.file);\n\n        reader.onload = () => {\n          return this.imageSelected = reader.result;\n        };\n      }\n    }\n\n    uploadImage(file) {\n      this._snackbar.open('Iniciando carga de imagen...', '', {\n        duration: 800,\n        horizontalPosition: 'center',\n        verticalPosition: 'bottom'\n      });\n\n      const fd = new FormData();\n      fd.append('recipeImage', file);\n      fd.append('id', this.recipeID);\n      this.recipesService.uploadImage(fd).subscribe(res => {\n        console.log(res);\n        setTimeout(() => {\n          this._snackbar.open('Imagen cargada...', '', {\n            duration: 1000,\n            horizontalPosition: 'center',\n            verticalPosition: 'bottom'\n          });\n        }, 2000);\n      }, err => console.log(err));\n    }\n\n  }\n\n  ImageUploadComponent.ɵfac = function ImageUploadComponent_Factory(t) {\n    return new (t || ImageUploadComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.MatSnackBar), i0.ɵɵdirectiveInject(i3.RecipesService));\n  };\n\n  ImageUploadComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ImageUploadComponent,\n    selectors: [[\"app-image-upload\"]],\n    inputs: {\n      recipeID: \"recipeID\",\n      recipeUrlPhoto: \"recipeUrlPhoto\"\n    },\n    decls: 7,\n    vars: 3,\n    consts: [[\"method\", \"POST\", \"enctype\", \"multipart/form-data\", 1, \"uploadImageForm\", 3, \"formGroup\", \"submit\"], [\"type\", \"file\", \"formControlName\", \"recipeImage\", \"name\", \"recipeImage\", \"id\", \"\", \"hidden\", \"\", \"required\", \"\", 3, \"change\"], [\"fileUpload\", \"\"], [1, \"noImage\"], [\"alt\", \"Recipe image or not image\", 1, \"pointer\", 3, \"src\", \"click\"], [\"type\", \"submit\", \"mat-raised-button\", \"\", \"color\", \"primary\", 1, \"acceptButton\", 3, \"disabled\"]],\n    template: function ImageUploadComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r1 = i0.ɵɵgetCurrentView();\n\n        i0.ɵɵelementStart(0, \"form\", 0);\n        i0.ɵɵlistener(\"submit\", function ImageUploadComponent_Template_form_submit_0_listener() {\n          return ctx.uploadImage(ctx.file);\n        });\n        i0.ɵɵelementStart(1, \"input\", 1, 2);\n        i0.ɵɵlistener(\"change\", function ImageUploadComponent_Template_input_change_1_listener($event) {\n          return ctx.onImageSelected($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelementStart(4, \"img\", 4);\n        i0.ɵɵlistener(\"click\", function ImageUploadComponent_Template_img_click_4_listener() {\n          i0.ɵɵrestoreView(_r1);\n\n          const _r0 = i0.ɵɵreference(2);\n\n          return _r0.click();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"button\", 5);\n        i0.ɵɵtext(6, \"Cargar foto\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"formGroup\", ctx.UploadImageForm);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"src\", ctx.imageSelected || ctx.recipeUrlPhoto || \"./assets/img/noImage.jpg\", i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(1);\n        i0.ɵɵpropertyInterpolate(\"disabled\", ctx.UploadImageForm.invalid);\n      }\n    },\n    directives: [i1.ɵNgNoValidate, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.DefaultValueAccessor, i1.NgControlStatus, i1.FormControlName, i1.RequiredValidator, i4.MatButton],\n    styles: [\".acceptButton[_ngcontent-%COMP%]{width:100%}.noImage[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;overflow:hidden}img[_ngcontent-%COMP%]{width:100%;height:100%;margin-bottom:1rem;object-fit:cover}.uploadImageForm[_ngcontent-%COMP%]{width:400px}\"]\n  });\n  return ImageUploadComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}