{"ast":null,"code":"import { MatTableDataSource } from '@angular/material/table';\nimport { take } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/equipments.service\";\nimport * as i2 from \"src/app/services/categories.service\";\nimport * as i3 from \"src/app/services/measures.service\";\nimport * as i4 from \"src/app/services/levels.service\";\nimport * as i5 from \"src/app/services/ingredientsDB.service\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"@angular/router\";\nimport * as i8 from \"@angular/material/snack-bar\";\nconst _c0 = [\"matPaginator\"];\n\nfunction AddEditDeleteComponent_th_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"th\", 21);\n    i0.ÉµÉµtext(1, \" Nombre \");\n    i0.ÉµÉµelementEnd();\n  }\n}\n\nfunction AddEditDeleteComponent_td_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"td\", 22);\n    i0.ÉµÉµtext(1);\n    i0.ÉµÉµelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r8 = ctx.$implicit;\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµtextInterpolate1(\" \", element_r8.name, \" \");\n  }\n}\n\nfunction AddEditDeleteComponent_th_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelement(0, \"th\", 23);\n  }\n}\n\nfunction AddEditDeleteComponent_td_24_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ÉµÉµgetCurrentView();\n\n    i0.ÉµÉµelementStart(0, \"td\", 24);\n    i0.ÉµÉµelementStart(1, \"a\", 25);\n    i0.ÉµÉµlistener(\"click\", function AddEditDeleteComponent_td_24_Template_a_click_1_listener() {\n      const restoredCtx = i0.ÉµÉµrestoreView(_r11);\n      const element_r9 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ÉµÉµnextContext();\n      return ctx_r10.editEntry(element_r9._id, element_r9.name);\n    });\n    i0.ÉµÉµelementStart(2, \"mat-icon\", 26);\n    i0.ÉµÉµtext(3, \"edit\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(4, \"a\", 25);\n    i0.ÉµÉµlistener(\"click\", function AddEditDeleteComponent_td_24_Template_a_click_4_listener() {\n      const restoredCtx = i0.ÉµÉµrestoreView(_r11);\n      const element_r9 = restoredCtx.$implicit;\n      const ctx_r12 = i0.ÉµÉµnextContext();\n      return ctx_r12.removeEntry(element_r9._id, element_r9.name);\n    });\n    i0.ÉµÉµelementStart(5, \"mat-icon\", 27);\n    i0.ÉµÉµtext(6, \" delete \");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ÉµÉµnextContext();\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµpropertyInterpolate1(\"matTooltip\", \"Editar \", ctx_r4.confElement.toLowerCase(), \"\");\n    i0.ÉµÉµadvance(3);\n    i0.ÉµÉµpropertyInterpolate1(\"matTooltip\", \"Eliminar \", ctx_r4.confElement.toLowerCase(), \"\");\n  }\n}\n\nfunction AddEditDeleteComponent_tr_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelement(0, \"tr\", 28);\n  }\n}\n\nfunction AddEditDeleteComponent_tr_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelement(0, \"tr\", 29);\n  }\n}\n\nexport let AddEditDeleteComponent = /*#__PURE__*/(() => {\n  class AddEditDeleteComponent {\n    constructor(_equipmentsService, _categoriesService, _measuresService, _levelsService, _ingredientsDBService, _fb, _router, _snackBar) {\n      this._equipmentsService = _equipmentsService;\n      this._categoriesService = _categoriesService;\n      this._measuresService = _measuresService;\n      this._levelsService = _levelsService;\n      this._ingredientsDBService = _ingredientsDBService;\n      this._fb = _fb;\n      this._router = _router;\n      this._snackBar = _snackBar; // VARIABLES\n\n      this.editMode = [{\n        name: '',\n        notes: ''\n      }, false];\n      this.confElement = '';\n      this.dbEntries = [];\n      this.pageSizeOptions = [10, 25, 50, 100];\n      this.displayedColumns = ['name', 'actions'];\n    }\n\n    ngOnInit() {\n      this.loadEntries();\n    }\n\n    applyFilter(event) {\n      const currentFilter = event.target.value;\n      this.ENTRIES_DATA.filter = currentFilter.trim().toLowerCase();\n    }\n\n    editEntry(id, name) {\n      this._snackBar.open('Iniciando ediciÃ³n', '', {\n        verticalPosition: 'bottom',\n        horizontalPosition: 'center',\n        duration: 1500\n      });\n\n      this.editMode[0] = {\n        name: name,\n        _id: id\n      };\n      this.editMode[1] = true;\n      console.log('ðŸš€ ~ IngredientsDBComponent ~ editIngredient ~ editMode', this.editMode);\n    }\n\n    removeEntry(id, name) {\n      const currentUrl = this._router.url;\n\n      switch (currentUrl) {\n        case '/categorias':\n          this.result = this._categoriesService.canDeleteCategory(id);\n          this.result.pipe(take(1)).subscribe(res => {\n            // console.log(res);\n            if (res == false) {\n              this._snackBar.open('Primero debe eliminar/modificar las recetas de la categorÃ­a', '', {\n                horizontalPosition: 'center',\n                verticalPosition: 'bottom',\n                duration: 2500\n              });\n\n              return;\n            } else {\n              this._categoriesService.removeCategory(id).pipe(take(1)).subscribe(res => {\n                this.updateDBSource(res);\n              }, err => console.log(err));\n            }\n          }, err => console.log(err));\n          break;\n\n        case '/medidas':\n          this.result = this._measuresService.canDeleteMeasure(id);\n          this.result.pipe(take(1)).subscribe(res => {\n            // console.log(res);\n            if (res == false) {\n              this._snackBar.open('Primero debe eliminar/modificar las recetas que incluyen esta medida', '', {\n                horizontalPosition: 'center',\n                verticalPosition: 'bottom',\n                duration: 2500\n              });\n\n              return;\n            } else {\n              this._measuresService.removeMeasure(id).pipe(take(1)).subscribe(res => {\n                this.updateDBSource(res);\n              }, err => console.log(err));\n            }\n          }, err => console.log(err));\n          break;\n\n        case '/niveles':\n          this.result = this._levelsService.canDeleteLevel(id);\n          this.result.pipe(take(1)).subscribe(res => {\n            // console.log(res);\n            if (res == false) {\n              this._snackBar.open('Primero debe eliminar/modificar las recetas del nivel', '', {\n                horizontalPosition: 'center',\n                verticalPosition: 'bottom',\n                duration: 2500\n              });\n\n              return;\n            } else {\n              this._levelsService.removeLevel(id).pipe(take(1)).subscribe(res => {\n                this.updateDBSource(res);\n              }, err => console.log(err));\n            }\n          }, err => console.log(err));\n          break;\n\n        case '/equipos':\n          this.result = this._equipmentsService.canDeleteEquipment(id);\n          this.result.pipe(take(1)).subscribe(res => {\n            if (res == false) {\n              this._snackBar.open('Primero debe eliminar/modificar las recetas que incluyen este equipo', '', {\n                horizontalPosition: 'center',\n                verticalPosition: 'bottom',\n                duration: 2500\n              });\n\n              return;\n            } else {\n              this._equipmentsService.removeEquipment(id).pipe(take(1)).subscribe(res => {\n                this.updateDBSource(res);\n              }, err => console.log(err));\n            }\n          }, err => console.log(err));\n          break;\n\n        case '/ingredientes':\n          this.result = this._ingredientsDBService.canDeleteIngredient(id);\n          this.result.pipe(take(1)).subscribe(res => {\n            if (res == false) {\n              this._snackBar.open('Primero debe eliminar/modificar las recetas que incluyen este ingrediente', '', {\n                horizontalPosition: 'center',\n                verticalPosition: 'bottom',\n                duration: 2500\n              });\n\n              return;\n            } else {\n              this._ingredientsDBService.removeIngredient(id).pipe(take(1)).subscribe(res => {\n                this.updateDBSource(res);\n              }, err => console.log(err));\n            }\n          }, err => console.log(err));\n          break;\n\n        default:\n          throw new Error('ENTRADA NO VALIDA');\n      }\n    }\n\n    loadEntries() {\n      const currentUrl = this._router.url;\n\n      switch (currentUrl) {\n        case '/categorias':\n          this.confElement = 'CategorÃ­a';\n\n          this._categoriesService.getCategoryList().subscribe(res => this.updateDBSource(res), err => console.log(err));\n\n          break;\n\n        case '/medidas':\n          this.confElement = 'Medida';\n\n          this._measuresService.getMeasures().subscribe(res => this.updateDBSource(res), err => console.log(err));\n\n          break;\n\n        case '/niveles':\n          this.confElement = 'Nivel';\n\n          this._levelsService.getLevels().subscribe(res => this.updateDBSource(res), err => console.log(err));\n\n          break;\n\n        case '/equipos':\n          this.confElement = 'Equipo';\n\n          this._equipmentsService.getEquipments().subscribe(res => this.updateDBSource(res), err => console.log(err));\n\n          break;\n\n        case '/ingredientes':\n          this.confElement = 'Ingrediente', this._ingredientsDBService.getIngredientsDB().subscribe(res => this.updateDBSource(res), err => console.log(err));\n          break;\n\n        default:\n          throw new Error('ENTRADA NO VALIDA');\n      }\n    }\n\n    updateDBSource(res) {\n      // console.log(res);\n      this.dbEntries = res;\n      this.ENTRIES_DATA = new MatTableDataSource(this.dbEntries);\n      this.ENTRIES_DATA.paginator = this.paginator;\n    }\n\n  }\n\n  AddEditDeleteComponent.Éµfac = function AddEditDeleteComponent_Factory(t) {\n    return new (t || AddEditDeleteComponent)(i0.ÉµÉµdirectiveInject(i1.EquipmentsService), i0.ÉµÉµdirectiveInject(i2.CategoriesService), i0.ÉµÉµdirectiveInject(i3.MeasuresService), i0.ÉµÉµdirectiveInject(i4.LevelsService), i0.ÉµÉµdirectiveInject(i5.IngredientsDBService), i0.ÉµÉµdirectiveInject(i6.FormBuilder), i0.ÉµÉµdirectiveInject(i7.Router), i0.ÉµÉµdirectiveInject(i8.MatSnackBar));\n  };\n\n  AddEditDeleteComponent.Éµcmp = /*@__PURE__*/i0.ÉµÉµdefineComponent({\n    type: AddEditDeleteComponent,\n    selectors: [[\"app-add-edit-delete\"]],\n    viewQuery: function AddEditDeleteComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ÉµÉµviewQuery(_c0, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ÉµÉµqueryRefresh(_t = i0.ÉµÉµloadQuery()) && (ctx.paginator = _t.first);\n      }\n    },\n    decls: 29,\n    vars: 9,\n    consts: [[1, \"container\", \"stickySub\"], [1, \"table-button-container\"], [1, \"sectionHeader\"], [1, \"spacer\"], [3, \"editMode\", \"confElement\"], [1, \"container\"], [\"appearance\", \"standard\", 1, \"table-filter-input\"], [\"matInput\", \"\", \"placeholder\", \"Qu\\u00E9 desea buscar\", \"autocomplete\", \"off\", 3, \"keyup\"], [\"input\", \"\"], [1, \"mat-elevation-z6\", \"entriesTable\"], [\"mat-table\", \"\", 3, \"dataSource\"], [\"matColumnDef\", \"name\"], [\"class\", \"colName\", \"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"class\", \"selectRow\", \"mat-cell\", \"\", 4, \"matCellDef\"], [\"matColumnDef\", \"actions\"], [\"class\", \"colActions\", \"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 4, \"matCellDef\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [\"mat-row\", \"\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"showFirstLastButtons\", \"\", 3, \"length\", \"pageSizeOptions\"], [\"matPaginator\", \"\"], [\"mat-header-cell\", \"\", 1, \"colName\"], [\"mat-cell\", \"\", 1, \"selectRow\"], [\"mat-header-cell\", \"\", 1, \"colActions\"], [\"mat-cell\", \"\"], [1, \"tableAction\", 3, \"click\"], [1, \"mat-icon-edit\", 3, \"matTooltip\"], [\"matTooltipClass\", \"tooltip-red\", 1, \"mat-icon-delete\", 3, \"matTooltip\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\"]],\n    template: function AddEditDeleteComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ÉµÉµelementStart(0, \"div\", 0);\n        i0.ÉµÉµelementStart(1, \"div\", 1);\n        i0.ÉµÉµelementStart(2, \"div\");\n        i0.ÉµÉµelementStart(3, \"span\", 2);\n        i0.ÉµÉµtext(4);\n        i0.ÉµÉµelementEnd();\n        i0.ÉµÉµelementStart(5, \"p\");\n        i0.ÉµÉµelementStart(6, \"i\");\n        i0.ÉµÉµtext(7);\n        i0.ÉµÉµelementEnd();\n        i0.ÉµÉµelementEnd();\n        i0.ÉµÉµelementEnd();\n        i0.ÉµÉµelement(8, \"div\", 3);\n        i0.ÉµÉµelement(9, \"app-add-edit-delete-detail\", 4);\n        i0.ÉµÉµelement(10, \"div\", 3);\n        i0.ÉµÉµelementEnd();\n        i0.ÉµÉµelementEnd();\n        i0.ÉµÉµelementStart(11, \"div\", 5);\n        i0.ÉµÉµelementStart(12, \"mat-form-field\", 6);\n        i0.ÉµÉµelementStart(13, \"mat-label\");\n        i0.ÉµÉµtext(14, \"Filter\");\n        i0.ÉµÉµelementEnd();\n        i0.ÉµÉµelementStart(15, \"input\", 7, 8);\n        i0.ÉµÉµlistener(\"keyup\", function AddEditDeleteComponent_Template_input_keyup_15_listener($event) {\n          return ctx.applyFilter($event);\n        });\n        i0.ÉµÉµelementEnd();\n        i0.ÉµÉµelementEnd();\n        i0.ÉµÉµelementStart(17, \"div\", 9);\n        i0.ÉµÉµelementStart(18, \"table\", 10);\n        i0.ÉµÉµelementContainerStart(19, 11);\n        i0.ÉµÉµtemplate(20, AddEditDeleteComponent_th_20_Template, 2, 0, \"th\", 12);\n        i0.ÉµÉµtemplate(21, AddEditDeleteComponent_td_21_Template, 2, 1, \"td\", 13);\n        i0.ÉµÉµelementContainerEnd();\n        i0.ÉµÉµelementContainerStart(22, 14);\n        i0.ÉµÉµtemplate(23, AddEditDeleteComponent_th_23_Template, 1, 0, \"th\", 15);\n        i0.ÉµÉµtemplate(24, AddEditDeleteComponent_td_24_Template, 7, 2, \"td\", 16);\n        i0.ÉµÉµelementContainerEnd();\n        i0.ÉµÉµtemplate(25, AddEditDeleteComponent_tr_25_Template, 1, 0, \"tr\", 17);\n        i0.ÉµÉµtemplate(26, AddEditDeleteComponent_tr_26_Template, 1, 0, \"tr\", 18);\n        i0.ÉµÉµelementEnd();\n        i0.ÉµÉµelement(27, \"mat-paginator\", 19, 20);\n        i0.ÉµÉµelementEnd();\n        i0.ÉµÉµelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ÉµÉµadvance(4);\n        i0.ÉµÉµtextInterpolate(ctx.confElement);\n        i0.ÉµÉµadvance(3);\n        i0.ÉµÉµtextInterpolate1(\"(digite \", ctx.confElement.toLowerCase(), \" a agregar)\");\n        i0.ÉµÉµadvance(2);\n        i0.ÉµÉµproperty(\"editMode\", ctx.editMode)(\"confElement\", ctx.confElement);\n        i0.ÉµÉµadvance(9);\n        i0.ÉµÉµproperty(\"dataSource\", ctx.ENTRIES_DATA);\n        i0.ÉµÉµadvance(7);\n        i0.ÉµÉµproperty(\"matHeaderRowDef\", ctx.displayedColumns);\n        i0.ÉµÉµadvance(1);\n        i0.ÉµÉµproperty(\"matRowDefColumns\", ctx.displayedColumns);\n        i0.ÉµÉµadvance(1);\n        i0.ÉµÉµproperty(\"length\", 200)(\"pageSizeOptions\", ctx.pageSizeOptions);\n      }\n    },\n    styles: [\"table{width:100%}.colName{width:80%}.colActions{width:20%}.stickySub{background-color:#131313}.tableAction{margin-left:2rem;cursor:pointer}\\n\"],\n    encapsulation: 2\n  });\n  return AddEditDeleteComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}